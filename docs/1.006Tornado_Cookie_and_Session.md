# 6 Cookie跟session
## 6.1 cookie
1. 在上节课，我们简单了解了登录过程，但是很明显，每次都需要登录，但是在平常逛网站的只需要登录一次，那么网站是如何记录登录信息的呢？
2. 有没有什么办法可以让浏览器记住登录信息，下次再次打开的时候，可以自动登录呢？
![](img/cookie)
## 6.2 set_cookie
1. expires:设置过期时间为60秒
2. path:设置路径
3. httponly:设置 js 不可以获取cookie
4. max_age:max_age 优先级高
```
import tornado.web
import time
from model.model import User

class SetHandler(tornado.web.RequestHandler):
    def get(self):
        self.set_cookie('cookie_1', 'this_is_test')
        self.set_cookie('cookie_2', 'this_is_test', expires= time.time() + 30 ) # 为cookie设置一个过期时间
        self.set_cookie('cookie_3', 'this_is_test',expires_days= 1) # 为cookie设置1天过期
        self.set_cookie('cookie_4', 'this_is_test',path='/') # 为cookie设置路径
        self.set_cookie('cookie_5', 'this_is_test', httponly=True) # 设置 js 不可以获取cookie
        self.set_cookie('cookie_6', 'this_is_test', max_age=120,expires=time.time()+ 30) #设置cookie过期时间，max_age优先级高
        self.set_secure_cookie('cookie_7','this_is_test') # 设置加密cookie
        self.write('这是一个cookie信息')
```

## set_secure_cookie 设置加密cookie
需要设置 application 的 cookie_secret 参数
```
import tornado.ioloop
import tornado.web
import tornado.httpserver

from tornado.options import define,options

define('port', default=8080, help='run port', type=int)

from handlers.main import LoginHandler, SetHandler

app = tornado.web.Application(
    handlers = [
        (r'/login',LoginHandler),
        (r'/set',SetHandler),

    ],
    template_path = 'templates',
    static_path = 'static',
    debug = True,
    cookie_secret ='jiamiacookieyan', # 设置加密cookie配置
)

if __name__ == "__main__":
    http_server = tornado.httpserver.HTTPServer(app)
    http_server.listen(options.port)
    tornado.ioloop.IOLoop.current().start()
```




## 6.2 登录验证
## 6.3 session
## 6.4 XSRF
